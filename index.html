<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OriLight</title>
    <meta name="description" content="OriLight">
    <meta name="keywords" content="OriLight,主页,HomePage">
    <link rel="shortcut icon" href="favicon.png">
    <link rel="stylesheet" href="style.css">
    <script>
        function changeNav(nav){
            navList = document.getElementsByClassName('nav-item')
            cardList = document.getElementsByClassName('card')
            for(let item of cardList){
                item.classList.add('card-deactive')
                item.classList.remove('card-active')
            }
            for(let item of navList){
                item.classList.remove('nav-active')
            }
            cardList[nav-1].classList.remove('card-deactive')
            cardList[nav-1].classList.add('card-active')
            navList[nav -1].classList.add('nav-active')
        }
    </script>
</head>

<body>
    <div id="container">
        <div class="box clearfix">
            <div class="nav">
                <div class="nav-item nav-active" onclick="changeNav(1)">INFO</div>
                <div class="nav-item" onclick="changeNav(2)">POST</div>
                <div class="nav-item" onclick="changeNav(3)">CONTACT</div>
                <div class="nav-item" onclick="changeNav(4)">ABOUT</div>
            </div>
            <div class="info card card-active">
                <div class="card-title"><span>INFO/信息</span></div>
                <p class="info-avatar"><img src="https://static.amarea.cn/avatar/favicon_256px.png" alt=""></p>
                <p class="info-name">OriLight</p>
            </div>
            <div class="post card card-deactive">
                <div class="card-title">POST/文章</div>
                <div id="post-container"></div>
                <div class="post-more"><a href="https://blog.amarea.cn/archives.html">查看更多</a></div>
            </div>
            <div class="post card card-deactive">
                <div class="card-title">CONTACT/联系</div>
            </div>
            <div class="post card card-deactive">
                <div class="card-title">ABOUT/关于</div>
            </div>
        </div>
    </div>
</body>
<script>
    async function getPost() {
        let apiUrl = 'https://blog.amarea.cn/api/recentPost'
        let postContainer = document.getElementById('post-container')
        let response = await fetch(apiUrl)
        if (!response.ok || response.status != 200) {
            return 0
        }
        let result = await response.json()
        postContainer.innerHTML = ''
        for (let post of result['data']) {
            let div = document.createElement('div')
            let link = document.createElement('a')
            link.href = post['permalink']
            link.text = post['title']
            div.classList.add('post-item')
            div.appendChild(link)
            postContainer.appendChild(div)
        }
       
    }
    getPost()
</script>

</html>